<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cartelera - Cinex Unidos</title>
  </head>
  <body>
    <header>
      <h1>
        <a href="#"
          ><img src="../images/cinex-unidos.png" alt="Logo Cinex Unidos" />Cinex
          Unidos</a
        >
      </h1>
      <nav class="menu-principal">
        <ul>
          <li class="item-menu item-menu--actual">
            <a href="../index.html">Inicio</a>
          </li>
          <li class="item-menu">
            <a href="#">Cartelera</a>
          </li>
          <li class="item-menu">
            <a href="./estrenos.html">Estrenos</a>
          </li>
          <li class="item-menu"><a href="">Eventos</a></li>
          <li class="item-menu"><a href="">Chucher&iacute;a</a></li>
          <li class="item-menu"><a href="">Mi cuenta</a></li>
          <li class="item-menu"><a href="">Contacto</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <section class="titulo-seleccionar-cine">
        <h1>Cartelera</h1>
        <select name="cine" id="cine">
          <!-- Tengo que hacer estas option dinamicas -->
          <option value="sambil-chacao">Sambil Chacao</option>
          <option value="lider">Lider</option>
          <option value="sambil-maracaibo">Sambil Maracaibo</option>
          <option value="sambil-barquisimeto">Sambil Barquisimeto</option>
          <option value="sambil-margarita">Sambil Margarita</option>
        </select>
      </section>
      <hr />
      <section class="container-peliculas"></section>
    </main>

    <footer>
      <div>
        <strong>Direcci&oacute;n principal</strong>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Temporibus
          nihil reiciendis,
        </p>
      </div>
      <div>
        <strong>Redes Sociales</strong>
        <nav>
          <a href=""><img src="./images/facebook.svg" alt="Facebook" /></a>
          <a href=""><img src="./images/x.svg" alt="X" /></a>
          <a href=""><img src="./images/instagram.svg" alt="Instagram" /></a>
        </nav>
      </div>
      <div>
        <strong>Contacto</strong>
        <address>
          <ul>
            <li><strong>Tel&eacute;fono: </strong>0212-555-5555</li>
            <li><strong>Celular (Whatsapp): </strong>0424-555-5555</li>
            <li><strong>Fax: </strong>0212-555-5555</li>
          </ul>
        </address>
      </div>
    </footer>
  </body>
  <script>
    const BASE_URL = "https://cinexunidos-production.up.railway.app/";

    //Suponiendo que ya tengo el cine
    let cineId = "sambil-chacao";

    async function getPeliculas() {
      let peliculas = [];

      const response = await fetch(`${BASE_URL}/theatres/`);

      cine = response.filter((cine) => {
        return cine.id === cineId;
      });

      let peliculasFiltradas = peliculas.filter((pelicula, i) => {
        return peliculas.indexOf(pelicula) === i;
      });

      return peliculasFiltradas;
    }

    getPeliculas().then((peliculas) => {
      const containerPeliculas = document.querySelector(".container-peliculas");

      peliculas.forEach((pelicula) => {
        const peliculaElement = document.createElement("article");
        peliculaElement.classList.add("pelicula");

        const imgElement = document.createElement("img");
        imgElement.src = pelicula.poster;
        imgElement.alt = pelicula.name;

        const titleElement = document.createElement("h2");
        titleElement.textContent = pelicula.name;

        const infoElement = document.createElement("p");
        infoElement.textContent = `${pelicula.rating} ${pelicula.runningTime} min`;

        const buttonElement = document.createElement("a");
        buttonElement.textContent = "Comprar";
        buttonElement.addEventListener("click", () => {
          gestionarCompra(pelicula);
        });

        peliculaElement.appendChild(imgElement);
        peliculaElement.appendChild(titleElement);
        peliculaElement.appendChild(sinopsisElement);

        containerPeliculas.appendChild(peliculaElement);
      });
    });
  </script>
</html>
